<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Ubuntu Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ubuntu-blue': '#1e40af',
                        'ubuntu-dark': '#1e3a8a',
                        'ubuntu-light': '#3b82f6',
                        'ubuntu-gold': '#f59e0b',
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        
        /* Progress indicator styles */
        .progress-step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .progress-step.inactive {
            background-color: #e5e7eb;
            color: #9ca3af;
        }
        
        .progress-step.active {
            background-color: #1e40af;
            color: white;
        }
        
        .progress-step.completed {
            background-color: #10b981;
            color: white;
        }
        
        .progress-line {
            width: 100px;
            height: 3px;
            background-color: #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .progress-line.completed {
            background-color: #10b981;
        }
        
        .signup-step {
            display: none;
        }
        
        .signup-step.active {
            display: block;
        }
        
        .radio-custom {
            width: 20px;
            height: 20px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            position: relative;
            transition: all 0.2s ease;
        }
        
        input[type="radio"]:checked + .radio-custom {
            border-color: #1e40af;
            background-color: #1e40af;
        }
        
        input[type="radio"]:checked + .radio-custom::after {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="index.html" class="flex items-center">
                        <img class="h-8 w-8 mr-3" src="images/ubuntuexploreroutline.png" alt="Ubuntu Explorer Logo">
                        <span class="text-ubuntu-blue font-bold text-xl">Ubuntu<span class="text-ubuntu-gold">Explorer</span></span>
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-gray-600 hover:text-ubuntu-blue">Back to Home</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="bg-white rounded-lg shadow-lg p-8">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Join Ubuntu Explorer</h1>
                <p class="text-gray-600">Create your account to discover authentic G20 tourism experiences</p>
            </div>

            <!-- Progress Indicator -->
            <div class="mb-8">
                <div class="flex items-center justify-center">
                    <div id="step1Indicator" class="progress-step active">1</div>
                    <div id="line1" class="progress-line"></div>
                    <div id="step2Indicator" class="progress-step inactive">2</div>
                    <div id="line2" class="progress-line"></div>
                    <div id="step3Indicator" class="progress-step inactive">3</div>
                </div>
                <div class="flex justify-between mt-3 text-sm text-gray-600">
                    <span>Account Info</span>
                    <span>User Type</span>
                    <span>Preferences</span>
                </div>
            </div>

            <!-- Step 1: Basic Information -->
            <div id="signupStep1" class="signup-step active">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">Create Your Account</h3>
                <div class="space-y-4">
                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                        <input type="text" id="name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue">
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                        <input type="email" id="email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue">
                    </div>
                    <div>
                        <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                        <input type="password" id="password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue">
                    </div>
                    <div>
                        <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
                        <input type="password" id="confirmPassword" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue">
                    </div>
                </div>
                <div class="mt-8">
                    <button onclick="nextStep()" class="w-full bg-ubuntu-blue hover:bg-ubuntu-dark text-white py-3 px-6 rounded-lg font-medium text-lg transition duration-200">
                        Continue
                    </button>
                </div>
            </div>

            <!-- Step 2: User Type Selection -->
            <div id="signupStep2" class="signup-step">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">I am a...</h3>
                <div class="space-y-4">
                    <label class="flex items-center p-6 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-ubuntu-blue transition-colors user-type-option">
                        <input type="radio" name="userType" value="tourist" class="sr-only">
                        <div class="radio-custom mr-4"></div>
                        <div class="flex-1">
                            <div class="flex items-center">
                                <i class="fas fa-camera text-ubuntu-blue text-2xl mr-4"></i>
                                <div>
                                    <h4 class="font-semibold text-gray-900 text-lg">Tourist/Traveler</h4>
                                    <p class="text-gray-600">I want to discover authentic experiences and connect with local culture</p>
                                </div>
                            </div>
                        </div>
                    </label>
                    <label class="flex items-center p-6 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-ubuntu-blue transition-colors user-type-option">
                        <input type="radio" name="userType" value="business" class="sr-only">
                        <div class="radio-custom mr-4"></div>
                        <div class="flex-1">
                            <div class="flex items-center">
                                <i class="fas fa-briefcase text-ubuntu-blue text-2xl mr-4"></i>
                                <div>
                                    <h4 class="font-semibold text-gray-900 text-lg">Business/Service Provider</h4>
                                    <p class="text-gray-600">I want to offer experiences, accommodations, or services to travelers</p>
                                </div>
                            </div>
                        </div>
                    </label>
                </div>
                <div class="flex space-x-4 mt-8">
                    <button onclick="prevStep()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 px-6 rounded-lg font-medium transition duration-200">
                        Back
                    </button>
                    <button onclick="nextStep()" class="flex-1 bg-ubuntu-blue hover:bg-ubuntu-dark text-white py-3 px-6 rounded-lg font-medium transition duration-200">
                        Continue
                    </button>
                </div>
            </div>

            <!-- Step 3: Tourist Preferences -->
            <div id="touristPreferences" class="signup-step">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">Tell us about your travel preferences</h3>
                <div class="space-y-6 max-h-96 overflow-y-auto">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">What interests you most? (Select all that apply)</label>
                        <div class="grid grid-cols-2 gap-3">
                            <label class="flex items-center"><input type="checkbox" name="interests" value="cultural" class="mr-2 accent-ubuntu-blue"> Cultural Heritage</label>
                            <label class="flex items-center"><input type="checkbox" name="interests" value="adventure" class="mr-2 accent-ubuntu-blue"> Adventure Sports</label>
                            <label class="flex items-center"><input type="checkbox" name="interests" value="food" class="mr-2 accent-ubuntu-blue"> Local Cuisine</label>
                            <label class="flex items-center"><input type="checkbox" name="interests" value="nature" class="mr-2 accent-ubuntu-blue"> Nature & Wildlife</label>
                            <label class="flex items-center"><input type="checkbox" name="interests" value="arts" class="mr-2 accent-ubuntu-blue"> Arts & Crafts</label>
                            <label class="flex items-center"><input type="checkbox" name="interests" value="music" class="mr-2 accent-ubuntu-blue"> Music & Dance</label>
                        </div>
                    </div>
                    
                    <div>
                        <label for="budget" class="block text-sm font-medium text-gray-700 mb-1">Travel Budget per Trip</label>
                        <select id="budget" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue">
                            <option value="">Select budget range</option>
                            <option value="budget">Budget ($500 - $1,500)</option>
                            <option value="mid">Mid-range ($1,500 - $3,000)</option>
                            <option value="luxury">Luxury ($3,000+)</option>
                        </select>
                    </div>

                    <div>
                        <label for="preferredCountries" class="block text-sm font-medium text-gray-700 mb-1">Which G20 countries interest you?</label>
                        <select id="preferredCountries" multiple class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue h-32">
                            <option value="south-africa">South Africa</option>
                            <option value="argentina">Argentina</option>
                            <option value="australia">Australia</option>
                            <option value="brazil">Brazil</option>
                            <option value="canada">Canada</option>
                            <option value="china">China</option>
                            <option value="france">France</option>
                            <option value="germany">Germany</option>
                            <option value="india">India</option>
                            <option value="indonesia">Indonesia</option>
                            <option value="italy">Italy</option>
                            <option value="japan">Japan</option>
                            <option value="mexico">Mexico</option>
                            <option value="russia">Russia</option>
                            <option value="saudi-arabia">Saudi Arabia</option>
                            <option value="south-korea">South Korea</option>
                            <option value="turkey">Turkey</option>
                            <option value="uk">United Kingdom</option>
                            <option value="usa">United States</option>
                        </select>
                        <p class="text-xs text-gray-500 mt-1">Hold Ctrl (Windows) or Cmd (Mac) to select multiple</p>
                    </div>
                </div>
                <div class="flex space-x-4 mt-8">
                    <button onclick="prevStep()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 px-6 rounded-lg font-medium transition duration-200">
                        Back
                    </button>
                    <button onclick="completeSignup()" class="flex-1 bg-ubuntu-gold hover:bg-yellow-600 text-gray-900 py-3 px-6 rounded-lg font-medium transition duration-200">
                        Create Account
                    </button>
                </div>
            </div>

            <!-- Step 3: Business Preferences -->
            <div id="businessPreferences" class="signup-step">
                <h3 class="text-xl font-semibold text-gray-900 mb-6">Tell us about your business</h3>
                <div class="space-y-6 max-h-96 overflow-y-auto">
                    <div>
                        <label for="businessType" class="block text-sm font-medium text-gray-700 mb-1">Type of Business</label>
                        <select id="businessType" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue">
                            <option value="">Select business type</option>
                            <option value="accommodation">Accommodation (Hotels, B&Bs, Hostels)</option>
                            <option value="tour-operator">Tour Operator</option>
                            <option value="restaurant">Restaurant/Food Service</option>
                            <option value="activity-provider">Activity Provider</option>
                            <option value="transport">Transportation Service</option>
                            <option value="cultural-site">Cultural Site/Museum</option>
                            <option value="guide">Local Guide</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="businessLocation" class="block text-sm font-medium text-gray-700 mb-1">Business Location</label>
                        <select id="businessLocation" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue">
                            <option value="">Select country</option>
                            <option value="south-africa">South Africa</option>
                            <option value="argentina">Argentina</option>
                            <option value="australia">Australia</option>
                            <option value="brazil">Brazil</option>
                            <option value="canada">Canada</option>
                            <option value="china">China</option>
                            <option value="france">France</option>
                            <option value="germany">Germany</option>
                            <option value="india">India</option>
                            <option value="indonesia">Indonesia</option>
                            <option value="italy">Italy</option>
                            <option value="japan">Japan</option>
                            <option value="mexico">Mexico</option>
                            <option value="russia">Russia</option>
                            <option value="saudi-arabia">Saudi Arabia</option>
                            <option value="south-korea">South Korea</option>
                            <option value="turkey">Turkey</option>
                            <option value="uk">United Kingdom</option>
                            <option value="usa">United States</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Services You Offer (Select all that apply)</label>
                        <div class="grid grid-cols-2 gap-3">
                            <label class="flex items-center"><input type="checkbox" name="services" value="accommodation" class="mr-2 accent-ubuntu-blue"> Accommodation</label>
                            <label class="flex items-center"><input type="checkbox" name="services" value="tours" class="mr-2 accent-ubuntu-blue"> Guided Tours</label>
                            <label class="flex items-center"><input type="checkbox" name="services" value="transport" class="mr-2 accent-ubuntu-blue"> Transportation</label>
                            <label class="flex items-center"><input type="checkbox" name="services" value="activities" class="mr-2 accent-ubuntu-blue"> Activities</label>
                            <label class="flex items-center"><input type="checkbox" name="services" value="food" class="mr-2 accent-ubuntu-blue"> Food & Drinks</label>
                            <label class="flex items-center"><input type="checkbox" name="services" value="cultural" class="mr-2 accent-ubuntu-blue"> Cultural Experiences</label>
                        </div>
                    </div>
                    
                    <div>
                        <label for="businessDescription" class="block text-sm font-medium text-gray-700 mb-1">Describe Your Services</label>
                        <textarea id="businessDescription" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-ubuntu-blue focus:border-ubuntu-blue" placeholder="Tell travelers what makes your services special..."></textarea>
                    </div>
                </div>
                <div class="flex space-x-4 mt-8">
                    <button onclick="prevStep()" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-3 px-6 rounded-lg font-medium transition duration-200">
                        Back
                    </button>
                    <button onclick="completeSignup()" class="flex-1 bg-ubuntu-gold hover:bg-yellow-600 text-gray-900 py-3 px-6 rounded-lg font-medium transition duration-200">
                        Create Account
                    </button>
                </div>
            </div>
        </div>

        <!-- Login Link -->
        <div class="text-center mt-6">
            <p class="text-gray-600">Already have an account? <a href="index.html" class="text-ubuntu-blue hover:text-ubuntu-dark font-medium">Sign in</a></p>
        </div>
    </div>

    <!-- Emergency Panic Button -->
    <div class="panic-button fixed bottom-6 left-6 z-50">
        <button id="panicBtn" class="w-16 h-16 bg-red-600 rounded-full shadow-lg flex items-center justify-center text-white hover:scale-110 transition-transform animate-pulse">
            <i class="fas fa-exclamation-triangle text-2xl"></i>
        </button>
    </div>

    <!-- Emergency Modal -->
    <div id="emergencyModal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="emergency-modal" role="dialog" aria-modal="true">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-red-900 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-red-600 text-white p-4">
                    <div class="flex items-center">
                        <i class="fas fa-exclamation-triangle text-3xl mr-3"></i>
                        <h3 class="text-lg font-bold">EMERGENCY ASSISTANCE</h3>
                    </div>
                </div>
                <div class="bg-white p-6">
                    <div class="mb-6">
                        <h4 class="text-lg font-semibold mb-3 text-red-800">Choose Your Emergency Contact:</h4>
                        
                        <!-- Local Emergency Numbers -->
                        <div class="space-y-3 mb-6">
                            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                                <h5 class="font-semibold text-red-800 mb-2">Local Emergency Services</h5>
                                <div class="space-y-2">
                                    <button onclick="callEmergency('911')" class="w-full bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg font-bold text-lg transition duration-200">
                                        📞 CALL 911 (USA/Canada)
                                    </button>
                                    <button onclick="callEmergency('999')" class="w-full bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg font-bold text-lg transition duration-200">
                                        📞 CALL 999 (UK)
                                    </button>
                                    <button onclick="callEmergency('112')" class="w-full bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg font-bold text-lg transition duration-200">
                                        📞 CALL 112 (Europe/International)
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Ubuntu Explorer Emergency Support -->
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                            <h5 class="font-semibold text-blue-800 mb-2">Ubuntu Explorer 24/7 Support</h5>
                            <button onclick="callEmergency('ubuntu-support')" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-semibold transition duration-200">
                                📞 CALL +27-11-123-4567
                            </button>
                            <p class="text-sm text-blue-600 mt-2">Multi-language support available</p>
                        </div>

                        <!-- Embassy Contacts -->
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                            <h5 class="font-semibold text-green-800 mb-2">Embassy/Consulate Support</h5>
                            <div class="space-y-2">
                                <button onclick="callEmergency('us-embassy')" class="w-full bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg transition duration-200">
                                    🇺🇸 US Embassy: +1-555-EMBASSY
                                </button>
                                <button onclick="callEmergency('uk-embassy')" class="w-full bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg transition duration-200">
                                    🇬🇧 UK Embassy: +44-555-EMBASSY
                                </button>
                                <button onclick="callEmergency('embassy-general')" class="w-full bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg transition duration-200">
                                    🌍 Find My Embassy
                                </button>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                            <h5 class="font-semibold text-yellow-800 mb-2">Quick Actions</h5>
                            <div class="grid grid-cols-2 gap-2">
                                <button onclick="shareLocation()" class="bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-lg text-sm transition duration-200">
                                    📍 Share Location
                                </button>
                                <button onclick="sendSOS()" class="bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-2 rounded-lg text-sm transition duration-200">
                                    📱 Send SOS SMS
                                </button>
                            </div>
                        </div>

                        <div class="mt-4 text-center text-sm text-gray-600">
                            <p><strong>Your current location will be shared with emergency services</strong></p>
                            <p class="mt-1">Stay calm. Help is on the way.</p>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-6 py-3 flex justify-between">
                    <button onclick="closeEmergencyModal()" class="bg-gray-300 hover:bg-gray-400 text-gray-700 px-4 py-2 rounded-lg transition duration-200">
                        Cancel
                    </button>
                    <button onclick="callEmergency('auto-detect')" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition duration-200">
                        🚨 AUTO-DETECT LOCAL EMERGENCY
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;

        function updateProgressIndicator() {
            for (let i = 1; i <= 3; i++) {
                const stepIndicator = document.getElementById(`step${i}Indicator`);
                const line = document.getElementById(`line${i}`);
                
                if (i < currentStep) {
                    stepIndicator.className = 'progress-step completed';
                    if (line) line.className = 'progress-line completed';
                } else if (i === currentStep) {
                    stepIndicator.className = 'progress-step active';
                    if (line) line.className = 'progress-line';
                } else {
                    stepIndicator.className = 'progress-step inactive';
                    if (line) line.className = 'progress-line';
                }
            }
        }

        function nextStep() {
            // Validate current step
            if (currentStep === 1) {
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                if (!name || !email || !password || !confirmPassword) {
                    alert('Please fill in all fields');
                    return;
                }
                
                if (password !== confirmPassword) {
                    alert('Passwords do not match');
                    return;
                }
            }
            
            if (currentStep === 2) {
                const userType = document.querySelector('input[name="userType"]:checked');
                if (!userType) {
                    alert('Please select whether you are a tourist or business');
                    return;
                }
            }
            
            // Hide current step
            document.getElementById(`signupStep${currentStep}`).classList.remove('active');
            
            currentStep++;
            
            if (currentStep === 3) {
                const userType = document.querySelector('input[name="userType"]:checked').value;
                if (userType === 'tourist') {
                    document.getElementById('touristPreferences').classList.add('active');
                } else {
                    document.getElementById('businessPreferences').classList.add('active');
                }
            } else {
                document.getElementById(`signupStep${currentStep}`).classList.add('active');
            }
            
            updateProgressIndicator();
        }

        function prevStep() {
            if (currentStep === 3) {
                document.getElementById('touristPreferences').classList.remove('active');
                document.getElementById('businessPreferences').classList.remove('active');
            } else {
                document.getElementById(`signupStep${currentStep}`).classList.remove('active');
            }
            
            currentStep--;
            document.getElementById(`signupStep${currentStep}`).classList.add('active');
            updateProgressIndicator();
        }

        function completeSignup() {
            const userData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                userType: document.querySelector('input[name="userType"]:checked').value,
                createdAt: new Date().toISOString()
            };
            
            if (userData.userType === 'tourist') {
                const interests = Array.from(document.querySelectorAll('input[name="interests"]:checked')).map(cb => cb.value);
                const budget = document.getElementById('budget').value;
                const preferredCountries = Array.from(document.getElementById('preferredCountries').selectedOptions).map(option => option.value);
                
                if (interests.length === 0) {
                    alert('Please select at least one interest');
                    return;
                }
                if (!budget) {
                    alert('Please select your travel budget');
                    return;
                }
                
                userData.preferences = {
                    interests,
                    budget,
                    preferredCountries
                };
            } else {
                const services = Array.from(document.querySelectorAll('input[name="services"]:checked')).map(cb => cb.value);
                const businessType = document.getElementById('businessType').value;
                const businessLocation = document.getElementById('businessLocation').value;
                const businessDescription = document.getElementById('businessDescription').value;
                
                if (!businessType || !businessLocation || !businessDescription.trim()) {
                    alert('Please fill in all required business information');
                    return;
                }
                if (services.length === 0) {
                    alert('Please select at least one service you offer');
                    return;
                }
                
                userData.businessInfo = {
                    businessType,
                    location: businessLocation,
                    services,
                    description: businessDescription
                };
            }
            
            // Save user data
            localStorage.setItem('ubuntuUserData', JSON.stringify(userData));
            
            // Success message and redirect
            alert(`Welcome to Ubuntu Explorer! Your ${userData.userType} account has been created successfully.`);
            
            if (userData.userType === 'tourist') {
                window.location.href = 'tourist-dashboard.html';
            } else {
                window.location.href = 'business-dashboard.html';
            }
        }

        // Handle radio button selection
        document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('click', function(e) {
                if (e.target.matches('input[name="userType"]')) {
                    // Remove selected class from all labels
                    document.querySelectorAll('.user-type-option').forEach(option => {
                        option.classList.remove('border-ubuntu-blue', 'bg-blue-50');
                    });
                    
                    // Add selected class to clicked label
                    e.target.closest('.user-type-option').classList.add('border-ubuntu-blue', 'bg-blue-50');
                }
            });

            // Panic button event listener
            const panicBtn = document.getElementById('panicBtn');
            if (panicBtn) {
                panicBtn.addEventListener('click', showEmergencyModal);
            }
            
            // Close modal events
            document.addEventListener('click', function(event) {
                const modal = document.getElementById('emergencyModal');
                if (event.target === modal) closeEmergencyModal();
            });
            
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') closeEmergencyModal();
            });
        });

        // Emergency Modal Functions
        function showEmergencyModal() {
            document.getElementById('emergencyModal').classList.remove('hidden');
            setTimeout(() => {
                detectUserLocation();
            }, 500);
        }

        function closeEmergencyModal() {
            document.getElementById('emergencyModal').classList.add('hidden');
        }

        function detectUserLocation() {
            const demoLocations = [
                { country: 'United States', city: 'New York', emergency: '911' },
                { country: 'United Kingdom', city: 'London', emergency: '999' },
                { country: 'South Africa', city: 'Cape Town', emergency: '10177' },
                { country: 'Japan', city: 'Tokyo', emergency: '110/119' },
                { country: 'Germany', city: 'Berlin', emergency: '112' },
                { country: 'Australia', city: 'Sydney', emergency: '000' }
            ];
            
            const randomLocation = demoLocations[Math.floor(Math.random() * demoLocations.length)];
            const autoDetectBtn = document.querySelector('button[onclick="callEmergency(\'auto-detect\')"]');
            if (autoDetectBtn) {
                autoDetectBtn.innerHTML = `🚨 CALL ${randomLocation.emergency} (${randomLocation.city})`;
                autoDetectBtn.setAttribute('onclick', `callEmergency('${randomLocation.emergency}')`);
            }
        }

        function callEmergency(type) {
            let message = '';
            let phoneNumber = '';
            
            switch(type) {
                case '911': phoneNumber = '911'; message = 'Calling 911 Emergency Services (USA/Canada)'; break;
                case '999': phoneNumber = '999'; message = 'Calling 999 Emergency Services (UK)'; break;
                case '112': phoneNumber = '112'; message = 'Calling 112 Emergency Services (Europe)'; break;
                case 'ubuntu-support': phoneNumber = '+27-11-123-4567'; message = 'Calling Ubuntu Explorer 24/7 Emergency Support'; break;
                case 'us-embassy': phoneNumber = '+1-555-EMBASSY'; message = 'Calling US Embassy Emergency Line'; break;
                case 'uk-embassy': phoneNumber = '+44-555-EMBASSY'; message = 'Calling UK Embassy Emergency Line'; break;
                case 'embassy-general': message = 'Opening Embassy Locator Service'; break;
                case 'auto-detect': message = 'Calling Local Emergency Services'; break;
                default: phoneNumber = type; message = `Calling ${type}`;
            }

            alert(`🚨 EMERGENCY CALL INITIATED 🚨\n\n${message}\n\nPhone: ${phoneNumber}\n\n📍 Your location has been shared with emergency services.\n\n⏰ Call connecting... (This is a demo - in real emergency, call actual emergency services)`);
            closeEmergencyModal();
        }

        function shareLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    alert(`📍 LOCATION SHARED\n\nLatitude: ${lat}\nLongitude: ${lng}\n\nYour location has been shared with:\n• Emergency contacts\n• Ubuntu Explorer Support\n• Local authorities\n\n(This is a demo)`);
                }, function() {
                    alert('📍 DEMO LOCATION SHARED\n\nDemo coordinates: 40.7128° N, 74.0060° W\n(New York City)\n\nIn real emergency, actual GPS coordinates would be shared.');
                });
            } else {
                alert('📍 DEMO LOCATION SHARED\n\nDemo coordinates: 40.7128° N, 74.0060° W\n(New York City)\n\nIn real emergency, actual GPS coordinates would be shared.');
            }
        }

        function sendSOS() {
            const sosMessage = `🆘 EMERGENCY SOS from Ubuntu Explorer\n\nI need immediate assistance.\n\nLocation: [GPS coordinates would be here]\nTime: ${new Date().toLocaleString()}\nUser ID: DEMO123\n\nThis message was sent automatically via Ubuntu Explorer panic button.`;
            alert(`📱 SOS MESSAGE SENT\n\n${sosMessage}\n\nSent to:\n• Emergency contacts\n• Ubuntu Explorer Support\n• Local authorities\n\n(This is a demo)`);
        }
    </script>
</body>
</html>
